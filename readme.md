# 小红书下载脚本

## 1. 简介

小红书图片、视频、实况下载工具。  

**功能：**  

1. ✅ 下载图片、视频、实况  
2. ✅ 支持浏览器下载或 Aria2 远程下载  
3. ✅ 选择性下载（可单篇笔记中部分图片）  
4. ✅ 自定义文件名格式  
5. ✅ 复制下载链接（普通格式）  
6. ✅ 远程下载可自定义路径，支持按文件夹分类（按作者昵称/笔记标题）  

## 2. 功能预览

![image-20250105223132595](./assets/image-20250105223132595.png)

![image-20250105223201018](./assets/image-20250105223201018.png)

## 3. 使用方法

1. 安装脚本  
2. 点击屏幕左侧浮动按钮  
3. 选择需要下载的图片/视频  
4. 开始下载  

## 4. 脚本设置

### 4.1. 功能设置
>
> 点击按钮`重置设置`可恢复默认配置  

#### 4.1.1. 命名规则

1. **特殊字符**：浏览器下载时会自动转换，但远程下载可能导致失败。参考：<https://blog.csdn.net/w8y56f/article/details/121189351>  
2. **全局变量**：  
   - 格式为`<变量名>`，如`<IP归属地>`  
   - 下载时自动替换为实际值（如笔记中的 IP 地址）  
3. **变量组**：  

   - 序号和图片尺寸需用`$$`包裹，例如：  

     ```markdown
     // 示例1
     $<序号>.$
     [<发布者昵称>]
     <标题>
     (<发布时间>)
     $_<宽度>x<高度>$
          
     // 示例2
     [<发布者昵称>]
     <标题>
     (<发布时间>)
     $_<宽度>x<高度>$
     $_<序号>$
     ```

   - 特殊情况：  
     - 仅下载单张图片时，序号会被忽略  
     - 仅下载高清类型时，图片尺寸会包含在文件名中  
4. **时间格式**：  
   - 自定义笔记发布时间格式，例如：  
     - `YYYY年MM月DD日HH时mm分ss秒` → `2024年12月28日12时02分01秒`  
     - `YYYY年MM月` → `2024年12月`  

#### 4.1.2. 远程下载设置  

1. **下载位置**：按格式填写自定义路径  
2. **请求地址**：需包含协议（如 `ws://aria2.xxx.com/jsonrpc`）  
3. **文件分类**：可选是否启用  

### 4.2. UI 设置

1. 长按浮动按钮可拖动位置  
2. 长按下载界面左侧边框可调整窗口大小  

## 5. 常见问题  

### 5.1. 安装后不显示浮动按钮

- 检查浏览器插件是否开启**开发者模式**，参考：<https://www.tampermonkey.net/faq.php?version=5.3.2&ext=dhdg#Q209>  

### 5.2. 远程下载连接失败  

1. 确认`服务地址`和`密钥`是否正确  
2. 检查 Motrix 是否启动，并开启`RPC 下载`功能  

- **提示**：建议使用 `WS 协议`，可实时接收下载完成通知（每次进入小红书会重新连接）  
